# RIP-003: Cross-Network Flow Messaging (Exploratory)

**Author:** M J (Recur Labs)  
**Status:** Draft / Exploratory  
**Version:** 0.1  
**Date:** October 2025  
**Depends on:** RIP-001 (Permissioned Pull Standard), RIP-002 (Consent Registry & Events)

---

## Summary

RIP-003 proposes a method for moving liquidity between EVM networks using *consented pull* instead of custodial bridges, IOU wrappers, or synthetic assets.

Instead of "lock on Chain A, mint on Chain B," RIP-003 coordinates two locally valid permissions — one on each chain — and lets a designated clearing agent execute back-to-back pulls under those permissions to relieve imbalance.

The result is cross-network liquidity smoothing driven by revocable consent, not wrapped collateral.

This document is exploratory. It is not a finalized security spec. No production deployment should rely on RIP-003 without independent audit.

---

## Motivation

Today, “bridging liquidity” usually means:
- Custody: someone (or some multisig) holds pooled assets.
- Synthetics: you don’t really move value, you mint a receipt.
- Risk surface: if that bridge fails, liquidity across ecosystems desyncs instantly.

RIP-003 aims to solve a narrower, more fundamental problem:
**How do we keep balances aligned across networks without inventing a new token or trusting a custodian?**

This is especially relevant for:
- stablecoin treasuries that operate across multiple L2s,
- exchanges that need inventory where demand actually is,
- payment networks that settle across chains.

---

## Core Idea

Instead of treating “bridging” as “teleport the asset,” RIP-003 treats it as **coordinated local debits under consent**.

High-level:

1. A treasury (the owner of funds) signs a permissioned pull Authorization on Chain A and a separate permissioned pull Authorization on Chain B.  
   - Each Authorization is bounded: amount caps, time window, revocable.  
   - Each Authorization is registered in that chain’s Consent Registry (RIP-002).

2. A clearing agent is named as the grantee in both Authorizations.

3. When Chain B is short and Chain A is long:
   - The clearing agent calls `pull()` on Chain A under the Chain A Authorization, moving funds from the treasury to the agent on Chain A.
   - The clearing agent then calls `pull()` on Chain B under the Chain B Authorization, moving funds from the agent to the treasury (or designated receiver) on Chain B.

4. Net effect:
   - Liquidity is shifted from A → B.
   - No bridging contract, no wrapped IOU token, no pooled custody.
   - The only thing that moved was value inside each native chain, under consent.

This is *not* “lock-and-mint.”
It’s “consented debit here + consented credit there,” coordinated by an agent whose authority is strictly scoped and instantly revocable.

---

## Roles

**Treasury**  
Holds funds on multiple chains. Issues the consents. Can revoke at any time.

**Clearing Agent**  
An address authorized to execute limited pulls on both chains. It is not a custodian; it is just temporarily allowed to act within explicit limits.

**Consent Registry (per chain)**  
Enforces revocation and emits events (RIP-002).  
If Treasury revokes either Authorization, the agent’s ability to move value under that hash instantly dies.

**Relay / Watcher (off-chain infra)**  
Observes Consent Registry events and Authorization hashes on both chains.  
It decides “imbalance exists, trigger smoothing now,” and instructs the clearing agent to act.  
This relay does not mint assets. It just coordinates timing.

---

## Flow Example (Ethereum ↔ Base)

1. Treasury signs Authorization_A on Ethereum:
   - grantee = ClearingAgent
   - token = USDC on Ethereum
   - maxPerPull = 1,000,000
   - validBefore = T + 24h
   - registered in Ethereum Consent Registry

2. Treasury signs Authorization_B on Base:
   - grantee = ClearingAgent
   - token = USDC on Base
   - maxPerPull = 1,000,000
   - validBefore = T + 24h
   - registered in Base Consent Registry

3. Base demand spikes. Treasury wants more liquidity on Base, less idle on Ethereum.

4. ClearingAgent:
   - calls `pull()` on Ethereum using Authorization_A → receives up to 1,000,000 USDC (Ethereum).
   - then calls `pull()` on Base using Authorization_B → sends up to 1,000,000 USDC (Base) to the Treasury (or a designated receiver the Treasury controls).

5. After the smoothing, Treasury can:
   - leave both consents live for future balancing,
   - or immediately revoke one or both Authorization hashes in the Consent Registry.

At no point:
- did we wrap tokens,
- did we trust a bridge multisig,
- did we mint IOUs.

All motion was just local pulls, under revocable consent, mirrored on both sides.

---

## Trust / Safety Model (v0.1)

- The Treasury is always the origin of consent on both chains.
- The Clearing Agent’s power is *scoped and temporary*: amount caps + expiry windows are enforced in the Authorization.
- Either Authorization can be revoked instantly on-chain in that chain’s Consent Registry (RIP-002).  
  After revocation, any `pull()` using that hash MUST revert.

- The Relay does not need custody. It only coordinates when both consents are live and an imbalance threshold is met.

- Auditors / regulators can observe both chains’ Consent Registries and reconstruct exactly:
  - which agent moved what
  - under which consent
  - during which window
  - and whether that consent was still active at time of movement.

---

## Why This Is Different

**No wrapping**  
We’re not creating synthetic USDC-on-ChainB-backed-by-USDC-on-ChainA. Each chain’s native token supply remains native.

**No bridging pool custody**  
There is no shared honeypot contract that holds funds “for the bridge.”  
Funds only ever move directly from Treasury → Agent (Chain A) and Agent → Treasury (Chain B) under signed limits.

**Revocable at will**  
Traditional bridges can’t be “revoked” by the user mid-flight.  
Here, the Treasury can kill the agent’s pull rights on either chain instantly. The Consent Registry enforces that kill-switch at execution time.

**Auditable by design**  
RIP-002 events (`PullExecuted`, `AuthorizationRevoked`) become the ledger of cross-network liquidity motion.
This gives exchanges and issuers something they’ve never had before: standardized, verifiable operational audit trails for cross-chain treasury balancing.

---

## Status

RIP-003 is exploratory.

An outline of the clearing pattern is being published to establish authorship and directional intent.
A hardened version (including relayer message format, signature replay rules across domains, and guidance for regulated issuers) will be proposed in a future draft.

**Do not deploy RIP-003 logic in production without audit.**

---

## Attribution

© 2025 M J — Recur Labs  
RIP-003 is part of the Recur permissioned-pull standard: consented continuity for digital value.
